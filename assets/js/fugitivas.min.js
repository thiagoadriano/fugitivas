var Fugitivas=Fugitivas||{};ko.components.register("form-content",{viewModel:function(n){var t=this,i=Fugitivas.ModelFugitivas.flagSatatusPonto()!=="new"?ko.utils.arrayFirst(Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO(),function(n){return Fugitivas.ModelFugitivas.idPonto()==n.ID()}):undefined;t.listType=n.tipos;t.listManufacturers=n.fabricantes;t.listSpecialty=n.especialidade;t.listSubtype=ko.observableArray([{NOME:"Selecione um Tipo com Subtipo",ID:""}]);t.typeSelect=ko.observable();t.subTypeSelect=ko.observable();t.manufactSelect=ko.observable();t.dimmerSelect=ko.observable();t.dimmerComboSelect=ko.observable();t.positionSelect=ko.observable();t.specialtySelect=ko.observable();t.flagDeletar=ko.observable(!1);t.save={novo:function(n){var s=Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO(),l=Fugitivas.Methods.getLastID(),h=$(Fugitivas.CONTAINER_IMAGEM).imgNotes("export"),i=h[h.length-1],e=$(".markerPoint").last(),o=Fugitivas.Methods.getItemId(t.listType(),n.typeSelect()),u=n.subTypeSelect()!==""?Fugitivas.Methods.getItemId(o.SUBTIPO(),n.subTypeSelect()):"",r,f,c;e.off("click");r={ID:l,COORDS:{X:i.x,Y:i.y},DADOS_PONTO:{TIPO_COMPONENTE:n.typeSelect(),SUBTIPO_COMPONENTE:n.subTypeSelect(),FABRICANTE:n.manufactSelect(),DIMENSAO:n.dimmerSelect(),MEDIDA_DIMENSAO:n.dimmerComboSelect(),POSICAO_PONTO:n.positionSelect(),ESPECIALIDADE_PONTO:n.specialtySelect()}};Fugitivas.URLS.Salvar?Fugitivas.Methods.postData(Fugitivas.URLS.Salvar+Fugitivas.ModelFugitivas.dadosModal().ID(),JSON.stringify(r),function(n){if(n.type){var t=o.SIGLA()+(u?" - "+u.SIGLA_SUBTIPO():"")+" - "+n.HASH;r.HASH=f;s.push(ko.mapping.fromJS(r));Fugitivas.Methods.callbackCadastro(t,e,{x:i.x,x:i.y})}Fugitivas.Notifica(n.type,n.mensagem)}):(f=Math.floor(Math.random()*1e3),c=o.SIGLA()+(u?" - "+u.SIGLA_SUBTIPO():"")+" - "+f,r.HASH=f,s.push(ko.mapping.fromJS(r)),Fugitivas.Methods.callbackCadastro(c,e,{x:i.x,y:i.y}),Fugitivas.Notifica(!0,"Ponto Cadastrado com Sucesso!"))},atualiza:function(n){var o=Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO(),r=Fugitivas.Methods.getItemId(t.listType(),n.typeSelect()),u=n.subTypeSelect()!==""?Fugitivas.Methods.getItemId(r.SUBTIPO(),n.subTypeSelect()):"",i=ko.utils.arrayFirst(Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO(),function(n){return Fugitivas.ModelFugitivas.idPonto()==n.ID()}),f=r.SIGLA()+(u?" - "+u.SIGLA_SUBTIPO():"")+" - "+i.HASH(),e={ID_GRUPO:Fugitivas.ModelFugitivas.dadosModal().ID(),ID:Fugitivas.ModelFugitivas.idPonto(),DADOS_PONTO:{TIPO_COMPONENTE:n.typeSelect(),SUBTIPO_COMPONENTE:n.subTypeSelect(),FABRICANTE:n.manufactSelect(),DIMENSAO:n.dimmerSelect(),MEDIDA_DIMENSAO:n.dimmerComboSelect(),POSICAO_PONTO:n.positionSelect(),ESPECIALIDADE_PONTO:n.specialtySelect()}};Fugitivas.URLS.Atualizar?Fugitivas.Methods.postData(Fugitivas.URLS.Atualizar+Fugitivas.ModelFugitivas.dadosModal().ID(),JSON.stringify(e),function(t){t.type&&(i.DADOS_PONTO.TIPO_COMPONENTE(n.typeSelect()),i.DADOS_PONTO.SUBTIPO_COMPONENTE(n.subTypeSelect()),i.DADOS_PONTO.FABRICANTE(n.manufactSelect()),i.DADOS_PONTO.DIMENSAO(n.dimmerSelect()),i.DADOS_PONTO.MEDIDA_DIMENSAO(n.dimmerComboSelect()),i.DADOS_PONTO.POSICAO_PONTO(n.positionSelect()),i.DADOS_PONTO.ESPECIALIDADE_PONTO(n.specialtySelect()),$(".namePoint[data-id='"+Fugitivas.ModelFugitivas.idPonto()+"']").find("#nomeTag").text(f),$("#NoteDialog").dialog("close"));Fugitivas.Notifica(t.type,t.mensagem)}):(i.DADOS_PONTO.TIPO_COMPONENTE(n.typeSelect()),i.DADOS_PONTO.SUBTIPO_COMPONENTE(n.subTypeSelect()),i.DADOS_PONTO.FABRICANTE(n.manufactSelect()),i.DADOS_PONTO.DIMENSAO(n.dimmerSelect()),i.DADOS_PONTO.MEDIDA_DIMENSAO(n.dimmerComboSelect()),i.DADOS_PONTO.POSICAO_PONTO(n.positionSelect()),i.DADOS_PONTO.ESPECIALIDADE_PONTO(n.specialtySelect()),$(".namePoint[data-id='"+Fugitivas.ModelFugitivas.idPonto()+"']").find("#nomeTag").text(f),$("#NoteDialog").dialog("close"),Fugitivas.Notifica(!0,"Ponto atualizado com Sucesso!"))}};ko.bindingHandlers.numeric={init:function(n){function t(n){var t=n.val().toString();return t.replace(/\D/,"")}$(n).on({keypress:function(){$(this).val(t($(this)))},keyup:function(){$(this).val(t($(this)))},blur:function(){$(this).val(t($(this)))}})}};ko.bindingHandlers.dadosInicial={init:function(){Fugitivas.ModelFugitivas.flagSatatusPonto()!=="new"&&i!==undefined&&(t.typeSelect(i.DADOS_PONTO.TIPO_COMPONENTE()),t.subTypeSelect(i.DADOS_PONTO.SUBTIPO_COMPONENTE()),t.manufactSelect(i.DADOS_PONTO.FABRICANTE()),t.dimmerSelect(i.DADOS_PONTO.DIMENSAO()),t.dimmerComboSelect(i.DADOS_PONTO.MEDIDA_DIMENSAO()),t.positionSelect(i.DADOS_PONTO.POSICAO_PONTO()),t.specialtySelect(i.DADOS_PONTO.ESPECIALIDADE_PONTO()))}};t.typeSelect.subscribe(function(n){var i,r;if(t.listSubtype([]),i=t.listType()[n],i!==undefined&&i.SUBTIPO().length)for(r in i.SUBTIPO())t.listSubtype.push(i.SUBTIPO()[r]);else t.listSubtype.push({NOME:"Selecione um Tipo com Subtipo",ID:""})});t.savePoint=function(n){Fugitivas.Methods.validarCampos()&&(Fugitivas.ModelFugitivas.flagSatatusPonto()==="new"?t.save.novo(n):Fugitivas.ModelFugitivas.flagSatatusPonto()==="edit"&&t.save.atualiza(n))};t.close=function(){if(t.novoPonto){var n=$(".markerPoint")[$(".markerPoint").length-1];$(n).trigger("remove");$("#NoteDialog").dialog("close")}else $("#NoteDialog").dialog("close")};t.deleted=function(){t.flagDeletar(!0)};t.noDeletar=function(){t.flagDeletar(!1)};t.yesDeletar=function(){var n,r,t;Fugitivas.ModelFugitivas.idPonto()!==""&&Fugitivas.ModelFugitivas.idPonto()!==undefined&&(Fugitivas.ModelFugitivas.flagSatatusPonto()!=="new"?Fugitivas.URLS.Deletar?Fugitivas.Methods.postData(Fugitivas.URLS.Deletar+Fugitivas.ModelFugitivas.idPonto(),i,function(n){if(n.type){Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO.remove(i);var t=document.querySelector('.fixPoint[data-id="'+Fugitivas.ModelFugitivas.idPonto()+'"]'),r=document.querySelector('.namePoint[data-id="'+Fugitivas.ModelFugitivas.idPonto()+'"]');t.parentNode&&(t.parentNode.removeChild(t),r.parentNode.removeChild(r))}Fugitivas.Notifica(n.type,n.mensagem)}):(Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO.remove(i),n=document.querySelector('.fixPoint[data-id="'+Fugitivas.ModelFugitivas.idPonto()+'"]'),r=document.querySelector('.namePoint[data-id="'+Fugitivas.ModelFugitivas.idPonto()+'"]'),n.parentNode&&(n.parentNode.removeChild(n),r.parentNode.removeChild(r)),Fugitivas.Notifica(!0,"Ponto Deletado com Sucesso!")):(t=document.querySelector('.pointInitial[data-id="'+Fugitivas.ModelFugitivas.idPonto()+'"]'),t.parentNode&&t.parentNode.removeChild(t)),$("#NoteDialog").dialog("close"))}},template:'<form id="fromDados" class="form-horizontal" data-bind="dadosInicial"><div role="tabpanel"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="#componente" aria-controls="componente" role="tab" data-toggle="tab">Componente<\/a><\/li><li role="presentation"><a href="#caracteristicas" aria-controls="caracteristicas" role="tab" data-toggle="tab">Características<\/a><\/li><\/ul><\/div><div class="tab-content"><div role="tabpanel" class="tab-pane fade in active" id="componente"><div class="form-group"><label class="col-md-4 control-label" for="tipo">* Tipo: <\/label><div class="col-md-8"><select id="tipo" class="form-control input-sm" data-bind="enable: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\' && flagDeletar() == false, options: listType, optionsText: \'COMPONENTE\', optionsValue: \'ID\', optionsCaption: \'Selecione\', value: typeSelect"><\/select><\/div><\/div><div class="form-group"><label class="col-md-4 control-label" for="subtipo">* Subtipo: <\/label><div class="col-md-8"><select id="subtipo" class="form-control input-sm" data-bind="enable: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\' && subTypeSelect() != \'\' && subTypeSelect() != undefined && flagDeletar() == false, options: listSubtype, optionsText: \'NOME\', optionsValue: \'ID\', value: subTypeSelect"><\/select><\/div><\/div><div class="form-group"><label class="col-md-4 control-label" for="fabricante">* Fabricante: <\/label><div class="col-md-8"><select id="fabricante" class="form-control input-sm" data-bind="enable: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\' && flagDeletar() == false, options: listManufacturers, optionsText: \'RAZAO_SOCIAL\', optionsValue: \'ID\', optionsCaption: \'Selecione\', value: manufactSelect"><\/select><\/div><\/div><\/div><div role="tabpanel" class="tab-pane fade" id="caracteristicas"><div class="form-group"><label class="col-md-5 control-label" for="dimensao">* Dimensão do componente: <\/label><div class="col-md-3"><input type="text" id="dimensao" class="form-control input-sm" data-bind="enable: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\' && flagDeletar() == false, value: dimmerSelect, numeric: dimmerSelect"><\/div><div class="col-md-4"><select id="dimensao_medida" class="form-control input-sm" data-bind="enable: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\' && flagDeletar() == false, value: dimmerComboSelect"><option value="0">Polegadas<\/option><option value="1">Milímetros<\/option><\/select><\/div><\/div><div class="form-group"><label class="col-md-5 control-label" for="posicao">* Posição do ponto: <\/label><div class="col-md-7"><input type="text" id="posicao" data-bind="enable: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\' && flagDeletar() == false, value: positionSelect"class="form-control input-sm"><\/div><\/div><div class="form-group"><label class="col-md-5 control-label" for="especialidade">* Especialidade do ponto: <\/label><div class="col-md-7"><select id="especialidade" class="form-control input-sm" data-bind="enable: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\' && flagDeletar() == false, options: listSpecialty, optionsText: \'ESPECIALIDADE\', optionsValue: \'ID\', optionsCaption: \'Selecione\', value:specialtySelect"><\/select><\/div><\/div><\/div><div class="row"><div class="col-md-3 col-md-offset-2"><button type="submit" class="btn btn-success btn-block" data-bind="visible: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\', enable: flagDeletar() == false, click: savePoint">Salvar<\/button><\/div><div class="col-md-3"><button type="button" class="btn btn-danger btn-block" data-bind="visible: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'view\', enable: flagDeletar() == false, click: deleted">Deletar<\/button><\/div><div class="col-md-3"><button type="button" class="btn btn-default btn-block" data-bind="visible: Fugitivas.ModelFugitivas.flagSatatusPonto() != \'new\', enable: flagDeletar() == false, click: close">Fechar<\/button><\/div><\/div><div class="row rowDelet" data-bind="fadeVisible: flagDeletar"><div class="col-md-12"><h2>Deseja realmente deletar este ponto?<\/h2><\/div><\/div><div class="row rowDelet" data-bind="fadeVisible: flagDeletar"><div class="col-md-4 col-md-offset-2"><button type="submit" class="btn btn-danger btn-block btn-xs" data-bind="click: yesDeletar">Sim<\/button><\/div><div class="col-md-4"><button type="button" class="btn btn-primary btn-block btn-xs" data-bind="click: noDeletar">Não<\/button><\/div><\/div><\/div><\/form>'});Fugitivas=Fugitivas||{};Fugitivas.Methods={validarCampos:function(){var i=["tipo","subtipo","fabricante","dimensao","dimensao_medida","posicao","especialidade"],u=["dimensao","dimensao_medida","posicao","especialidade"],f=["tipo","subtipo","fabricante"],n=[],r,t,e,o,s,h;for(r in i)t=$("#"+i[r]),t.attr("disabled")||(t.val()===""?(t.addClass("validation"),n.push(i[r])):t.hasClass("validation")?t.removeClass("validation"):undefined);if(n.length)for(e in u){if(n[0]===u[e]){o=$('.nav-tabs a[aria-controls="caracteristicas"]').parent().hasClass("active");o||$('.nav-tabs a[aria-controls="caracteristicas"]').trigger("click");$("#"+n[0]).focus();return}for(s in f)if(n[0]===f[s]){h=$('.nav-tabs a[aria-controls="componente"]').parent().hasClass("active");h||$('.nav-tabs a[aria-controls="componente"]').trigger("click");$("#"+n[0]).focus();return}}return n.length?0:1},getItemId:function(n,t){return ko.utils.arrayFirst(n,function(n){return parseInt(t)==n.ID()})||"Not Found"},callbackCadastro:function(n,t,i){Fugitivas.ModelFugitivas.flagSatatusPonto()==="new"&&$("#NoteDialog").dialog("close");var r=t.attr("data-id"),f=$(Fugitivas.CONTAINER_IMAGEM).imgViewer("imgToView",i.x,i.y),u=n.replace(/\W/g,""),o="fix-"+u,c="base-"+u,s="label-"+u,h='<input type="hidden" name="idPoint" value="'+r+'"/><span id="nomeTag">'+n+'<\/span><button class="visualizar"><span class="glyphicon glyphicon-eye-open"><\/span><\/button><button class="editar"><span class="glyphicon glyphicon-edit"><\/span><\/button>',e=$(document.createElement("div"));e.addClass("namePoint").attr("data-id",r).attr("id",s).css({top:f.y,left:f.x}).append(h);$(Fugitivas.CONTAINER_IMAGEM).imgViewer("addElem",e);$(Fugitivas.CONTAINER_IMAGEM).imgViewer("update");t.attr("id",o).removeClass("pointInitial").addClass("fixPoint");Fugitivas.Methods.createLine({id:r})},getLastID:function(){var t=Fugitivas.ModelFugitivas.dadosModal(),n=t.MARCACAO_PONTO();return n.length?parseInt(n[n.length-1].ID())+1:0},getData:function(n,t){$.ajax({url:n,type:"GET",dataType:"json",cache:!1,sync:!0,success:function(n){t&&typeof t=="function"&&t(n)},error:function(n){console.error(n)}})},postData:function(n,t,i){$.ajax({url:n,type:"POST",dataType:"json",data:t,cache:!1,sync:!0,success:function(n){i&&typeof i=="function"&&i(n)},error:function(n){console.error(n)}})},createLine:function(n){jsPlumb.ready(function(){var t=jsPlumb.getInstance({PaintStyle:{lineWidth:4,strokeStyle:"#61B7CF",outlineColor:"white",outlineWidth:.5},Connector:["Bezier",{curviness:30}],Endpoints:[null,["Dot",{radius:4}]],EndpointStyles:[{fillStyle:""},{fillStyle:"#7AB02C"}],MaxConnections:1,ReattachConnections:!0,Anchors:["BottomCenter",[.04,.12]],DragOptions:{cursor:"move",zIndex:2e3},Container:"viewport"});t.connect({source:$('.fixPoint[data-id="'+n.id+'"]'),target:$('.namePoint[data-id="'+n.id+'"]'),scope:"scope_"+n.id});t.draggable($('.namePoint[data-id="'+n.id+'"]'))})},delegateEdit:function(){(function(){$("#viewport").on("click",".editar",function(){var n=$(this).siblings('input[name="idPoint"]').val();Fugitivas.ModelFugitivas.flagSatatusPonto("edit");Fugitivas.ModelFugitivas.idPonto(n);Fugitivas.ModelFugitivas.flagSatatusPonto()==="edit"&&Fugitivas.Methods.dialogOpen("Editar Ponto",$(this))})})()},delegateView:function(){(function(){$("#viewport").on("click",".visualizar",function(){var n=$(this).siblings('input[name="idPoint"]').val();Fugitivas.ModelFugitivas.flagSatatusPonto("view");Fugitivas.ModelFugitivas.idPonto(n);Fugitivas.ModelFugitivas.flagSatatusPonto()==="view"&&Fugitivas.Methods.dialogOpen("Visualizar Ponto",$(this))})})()},dialogOpen:function(n,t){$("#NoteDialog").remove();$('<div id="NoteDialog"><\/div>').dialog({title:n,resizable:!1,draggable:!0,modal:!0,closeOnEscape:!1,closeText:"hide",height:"280",width:"400",position:{my:"left top",at:"right bottom",of:t},open:function(){$(this).css("overflow","hidden");$(".ui-dialog-titlebar-close").remove();$(this).attr("data-bind","component: {name: 'form-content', params:{tipos: listagemComponente, fabricantes: listagemFabricante, especialidade: listagemEspecialidade} }");ko.applyBindings(Fugitivas.ModelFugitivas,$("#NoteDialog")[0])}})},buscaComponetes:function(n,t){var i=Fugitivas.ModelFugitivas.listagemComponente(),f="",e="",r,u;for(r in i)if(i[r].ID()===n.toString()){f=i[r];for(u in i[r].SUBTIPO())if(i[r].SUBTIPO().length>0&&i[r].SUBTIPO()[u].ID()===t.toString()){e=i[r].SUBTIPO()[u].SIGLA_SUBTIPO();break}else if(i[r].SUBTIPO().length===0)break}else if(i.length===0)break;return{tipo:f,subtipo:e}},carregaPontos:function(){var t=Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO(),f=t.length,n,i,r,u;for(Fugitivas.ModelFugitivas.flagSatatusPonto("insert"),n=0;n<f;n++)i=Fugitivas.Methods.buscaComponetes(t[n].DADOS_PONTO.TIPO_COMPONENTE(),t[n].DADOS_PONTO.SUBTIPO_COMPONENTE()),Fugitivas.ModelFugitivas.idPonto(t[n].ID()),$(Fugitivas.CONTAINER_IMAGEM).imgNotes("addNote",t[n].COORDS.X(),t[n].COORDS.Y(),null),r=$(".markerPoint").last(),r.off("click"),u=i.tipo.SIGLA()+(i.subtipo!==""?" - "+i.subtipo:"")+" - "+t[n].HASH(),Fugitivas.Methods.callbackCadastro(u,r,{x:t[n].COORDS.X(),y:t[n].COORDS.Y()});Fugitivas.ModelFugitivas.flagSatatusPonto("new")},dispararEventos:function(){$("#modalPontos").modal("show");$(Fugitivas.CONTAINER_IMAGEM).imgNotes(Fugitivas.defaultImgNotes);$("#viewport > img").one("load",function(){Fugitivas.Methods.delegateEdit();Fugitivas.Methods.delegateView();Fugitivas.ModelFugitivas.dadosModal().MARCACAO_PONTO().length&&Fugitivas.Methods.carregaPontos()}).each(function(){$(this).get(0).complete&&$(this).load()})},preencheModal:function(n){Fugitivas.ElModal.EMPRESA.val(n.EMPRESA());Fugitivas.ElModal.NIVEL1.val(n.NIVEL1());Fugitivas.ElModal.NIVEL2.val(n.NIVEL2());Fugitivas.ElModal.NIVEL3.val(n.NIVEL3());Fugitivas.ElModal.UNIDADE_PROCESSO.val(n.UNIDADE_PROCESSO());Fugitivas.ElModal.LINHA_PROCESSO.val(n.LINHA_PROCESSO());Fugitivas.ElModal.TAG_EQUIPAMENTO.val(n.TAG_EQUIPAMENTO());Fugitivas.ElModal.POSICAO_GRUPO.val(n.POSICAO_GRUPO());Fugitivas.ElModal.FLUXOGRAMA.val(n.FLUXOGRAMA());Fugitivas.ElModal.NOTA.val(n.NOTA());Fugitivas.ElModal.IMAGEM.attr("src","imagem/"+n.IMG_NAME())}};Fugitivas=Fugitivas||{};Fugitivas.CONTAINER_IMAGEM="#MainContentIMG";Fugitivas.URLS={};Fugitivas.URLS.Base="/json_dados/";Fugitivas.URLS.Especialidade=Fugitivas.URLS.Base+"_especialidade.json";Fugitivas.URLS.Componente=Fugitivas.URLS.Base+"_componente.json";Fugitivas.URLS.ListaGrupo=Fugitivas.URLS.Base+"_lista_de_grupo.json";Fugitivas.URLS.Fabricante=Fugitivas.URLS.Base+"_fabricantes.json";Fugitivas.URLS.Deletar=undefined;Fugitivas.URLS.Salvar=undefined;Fugitivas.URLS.Atualizar=undefined;Fugitivas.defaultImgNotes={onAdd:function(){this.options.vAll="bottom";this.options.hAll="middle";var n=$(document.createElement("div"));return n.addClass("markerPoint pointInitial"),Fugitivas.ModelFugitivas.flagSatatusPonto()!=="insert"?n.attr("data-id",Fugitivas.Methods.getLastID()):n.attr("data-id",Fugitivas.ModelFugitivas.idPonto()),n},onEdit:function(n,t){var i=$(t);return Fugitivas.ModelFugitivas.flagSatatusPonto("new"),Fugitivas.ModelFugitivas.idPonto(Fugitivas.Methods.getLastID()),Fugitivas.Methods.dialogOpen("Adicionar Ponto",t)}};Fugitivas.ElModal={tituloModal:$("#tituloModal"),EMPRESA:$("#EMPRESA"),NIVEL1:$("#NIVEL1"),NIVEL2:$("#NIVEL2"),NIVEL3:$("#NIVEL3"),UNIDADE_PROCESSO:$("#UNIDADE_PROCESSO"),LINHA_PROCESSO:$("#LINHA_PROCESSO"),TAG_EQUIPAMENTO:$("#TAG_EQUIPAMENTO"),POSICAO_GRUPO:$("#POSICAO_GRUPO"),FLUXOGRAMA:$("#FLUXOGRAMA"),NOTA:$("#NOTA"),IMAGEM:$(Fugitivas.CONTAINER_IMAGEM),zoomOut:$("#zoomOut"),editClick:$("#editClick"),FecharModal:$("#FecharModal"),openModal:$("#grupo")};Fugitivas.Notifica=function(n,t){var i=n?"notifica-ok":"notifica-erro",r=n?"glyphicon-ok-sign":"glyphicon-remove-sign",u='<div id="notifica" class="'+i+'" style="display:none;"><p><span class="glyphicon '+r+'"><\/span>'+t+"<\/p><\/div>";$("#notifica").length&&$("#notifica").remove();$("body").append(u);$("#notifica").fadeIn(1e3).delay(3e3).fadeOut(1e3,function(){$(this).remove()})};$(function(){$("#containerLoading").css("height",$(document).height());$.ajaxSetup({beforeSend:function(){$("#containerLoading").fadeIn("slow")},complete:function(){$("#containerLoading").fadeOut("slow")}});Fugitivas.ElModal.FecharModal.on("click",function(){$("#modalPontos").modal("hide");Fugitivas.ElModal.IMAGEM.attr("src","");$(Fugitivas.CONTAINER_IMAGEM).imgNotes("destroy")});Fugitivas.ElModal.openModal.on("click",".openModal",function(){var n=$(this).attr("data-id-grupo"),t=$(this).parents("tr").find(".nomeGrupo").text();n!=""&&Fugitivas.Methods.getData(Fugitivas.URLS.Base+n+".json",function(n){Fugitivas.ModelFugitivas.dadosModal(ko.mapping.fromJS(n));Fugitivas.ElModal.tituloModal.text(t);Fugitivas.Methods.preencheModal(Fugitivas.ModelFugitivas.dadosModal());Fugitivas.Methods.dispararEventos()})});Fugitivas.ElModal.editClick.on("click",function(){$(Fugitivas.CONTAINER_IMAGEM).imgNotes("option","canEdit")?($(Fugitivas.CONTAINER_IMAGEM).imgNotes("option","canEdit",!1),$(this).text("Editar")):($(Fugitivas.CONTAINER_IMAGEM).imgNotes("option","canEdit",!0),$(this).text("Concluir"))});Fugitivas.ElModal.zoomOut.on("click",function(){$(Fugitivas.CONTAINER_IMAGEM).imgNotes("option","zoom",1)})});Fugitivas=Fugitivas||{};Fugitivas.ModelFugitivas={listaGrupoPontos:ko.observableArray(),dadosModal:ko.observable(),listaPontos:ko.observableArray(),listagemComponente:ko.observableArray(),listagemEspecialidade:ko.observableArray(),listagemFabricante:ko.observableArray(),flagSatatusPonto:ko.observable(),idPonto:ko.observable(),initcial:function(){Fugitivas.Methods.getData(Fugitivas.URLS.ListaGrupo,function(n){for(var t in n)Fugitivas.ModelFugitivas.listaGrupoPontos.push(ko.mapping.fromJS(n[t]))});Fugitivas.Methods.getData(Fugitivas.URLS.Componente,function(n){for(var t in n)n[t].STATUS==="ativo"&&Fugitivas.ModelFugitivas.listagemComponente.push(ko.mapping.fromJS(n[t]))});Fugitivas.Methods.getData(Fugitivas.URLS.Fabricante,function(n){for(var t in n)n[t].STATUS==="ativo"&&Fugitivas.ModelFugitivas.listagemFabricante.push(ko.mapping.fromJS(n[t]))});Fugitivas.Methods.getData(Fugitivas.URLS.Especialidade,function(n){for(var t in n)n[t].STATUS==="ativo"&&Fugitivas.ModelFugitivas.listagemEspecialidade.push(ko.mapping.fromJS(n[t]))})}};ko.applyBindings(Fugitivas.ModelFugitivas);Fugitivas.ModelFugitivas.initcial();ko.bindingHandlers.fadeVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i))},update:function(n,t){var i=t();ko.unwrap(i)?$(n).fadeIn():$(n).fadeOut()}};
/*
//# sourceMappingURL=fugitivas.min.js.map
*/