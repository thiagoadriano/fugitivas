(function(n){"use strict";for(var r=0,i=["webkit","moz"],t=0;t<i.length&&!n.requestAnimationFrame;t++)n.requestAnimationFrame=n[i[t]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[i[t]+"CancelAnimationFrame"]||n[i[t]+"CancelRequestAnimationFrame"];n.nativeRAF=typeof n.requestAnimationFrame!="undefined";n.nativeRAF||(n.requestAnimationFrame=function(t){var i=(new Date).getTime(),u=Math.max(0,16-(i-r)),f=n.setTimeout(function(){t(i+u)},u);return r=i+u,f},n.cancelAnimationFrame=function(n){clearTimeout(n)})})(this),function(n,t){"use strict";function r(){i&&(t.requestAnimationFrame(r),jQuery.fx.tick())}var i=!1;t.nativeRAF||(n.fx.timer=function(t){t()&&n.timers.push(t)&&!i&&(i=!0,r())},n.fx.stop=function(){i=!1})}(jQuery,this);
/*!
 * toe.js
 * version 3.0.6
 * author: Damien Antipa
 * https://github.com/dantipa/toe.js
 */
(function(n,t){function u(t,i,r,u){n.each(f,function(n,f){f[t].call(this,i,r,u)})}function e(n){var t=i.Event(n);r=i.State(t);u("touchstart",n,r,t)}function o(n){if(r){var t=i.Event(n);r.move.push(t);u("touchmove",n,r,t)}}function s(n){var t=i.Event(n);r.end=t;u("touchend",n,r,t)}var r,f={},h="ontouchstart"in t,i={active:!1,on:function(){n(document).on("touchstart MSPointerDown pointerdown",e).on("touchmove MSPointerMove MSPointerHover pointermove",o).on("touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",s);i.active=!0},off:function(){n(document).off("touchstart MSPointerDown pointerdown",e).off("touchmove MSPointerMove MSPointerHover pointermove ",o).off("touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",s);i.active=!1},track:function(n,t){f[n]=t},addEventParam:function(t,i){var u=n(t.target),r=u.offset(),f={pageX:t.point[0].x,pageY:t.point[0].y,offsetX:r.left-t.point[0].x,offsetY:r.top-t.point[0].y};return n.extend(f,i)},Event:function(t){var r={type:t.type,timestamp:(new Date).getTime(),target:t.target,point:[]},i=[];return t.type.indexOf("touch")>-1?i=t.changedTouches||t.originalEvent.changedTouches||t.touches||t.originalEvent.touches:t.type.match(/.*?pointer.*?/i)&&(i=[t.originalEvent]),n.each(i,function(n,t){r.point.push({x:t.pageX,y:t.pageY})}),r},State:function(n){var t=n.point[0];return{start:n,move:[],end:null}},calc:{getDuration:function(n,t){return t.timestamp-n.timestamp},getDistance:function(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},getAngle:function(n,t){return Math.atan2(t.y-n.y,t.x-n.x)*180/Math.PI},getDirection:function(n){return n<-45&&n>-135?"up":n>=-45&&n<=45?"right":n>=45&&n<135?"down":n>=135||n<=-135?"left":"unknown"},getScale:function(n,t){var i=n.point,r=t.point;return i.length===2&&r.length===2?(Math.sqrt(Math.pow(r[0].x-r[1].x,2)+Math.pow(r[0].y-r[1].y,2))/Math.sqrt(Math.pow(i[0].x-i[1].x,2)+Math.pow(i[0].y-i[1].y,2))).toFixed(2):0},getRotation:function(n,t){var i=n.point,r=t.point;return i.length===2&&r.length===2?(Math.atan2(r[0].y-r[1].y,r[0].x-r[1].x)*180/Math.PI-Math.atan2(i[0].y-i[1].y,i[0].x-i[1].x)*180/Math.PI).toFixed(2):0}}};i.on();n.toe=i})(jQuery,this),function(n,t){var i="swipe",r={distance:40,duration:1200,direction:"all"};t.track(i,{touchstart:function(n,t,r){t[i]={finger:r.point.length}},touchmove:function(n,t,r){t[i].finger=r.point.length>t[i].finger?r.point.length:t[i].finger},touchend:function(u,f,e){var o=n.extend(r,u.data),h,s;h=t.calc.getDuration(f.start,e);s=t.calc.getDistance(f.start.point[0],e.point[0]);h<o.duration&&s>o.distance&&(f[i].angle=t.calc.getAngle(f.start.point[0],e.point[0]),f[i].direction=t.calc.getDirection(f[i].angle),f[i].distance=s,(o.direction==="all"||f[i].direction===o.direction)&&n(u.target).trigger(n.Event(i,t.addEventParam(f.start,f[i]))))}})}(jQuery,jQuery.toe,this),function(n,t){var r=document.documentElement.clientWidth,u=document.documentElement.clientHeight,f=Math.sqrt(r*u),e=2/100*f,i="tap",o={distance:e,duration:300,finger:1};t.track(i,{touchstart:function(n,t,r){t[i]={finger:r.point.length}},touchmove:function(n,t,r){t[i].finger=r.point.length>t[i].finger?r.point.length:t[i].finger},touchend:function(r,u,f){var e=n.extend(o,r.data),s,h;s=t.calc.getDuration(u.start,f);h=t.calc.getDistance(u.start.point[0],f.point[0]);s<e.duration&&h<e.distance&&u[i].finger===e.finger&&n(r.target).trigger(n.Event(i,t.addEventParam(u.start,u[i])))}})}(jQuery,jQuery.toe,this),function(n,t){var u,r,i="taphold",f={distance:20,duration:500,finger:1};t.track(i,{touchstart:function(e,o,s){var h=n.extend(f,e.data);r=!1;o[i]={finger:s.point.length};clearTimeout(u);u=setTimeout(function(){!r&&t.active&&o[i].finger===h.finger&&n(e.target).trigger(n.Event(i,t.addEventParam(s,o[i])))},h.duration)},touchmove:function(u,e,o){var h=n.extend(f,u.data),s;e[i].finger=o.point.length>e[i].finger?o.point.length:e[i].finger;s=t.calc.getDistance(e.start.point[0],o.point[0]);s>h.distance&&(r=!0)},touchend:function(){r=!0;clearTimeout(u)}})}(jQuery,jQuery.toe,this),function(n,t){var i="transform",u={scale:.1,rotation:15},r;t.track(i,{touchstart:function(n,t,u){r=!1;t[i]={start:u,move:[]}},touchmove:function(f,e,o){var s=n.extend(u,f.data);o.point.length===2&&(e[i].move.push(o),e[i].start.point.length!==2&&o.point.length===2&&(e[i].start=n.extend({},o)),e[i].rotation=t.calc.getRotation(e[i].start,o),e[i].scale=t.calc.getScale(e[i].start,o),(Math.abs(1-e[i].scale)>s.scale||Math.abs(e[i].rotation)>s.rotation)&&(r||(n(f.target).trigger(n.Event("transformstart",e[i])),r=!0),n(f.target).trigger(n.Event("transform",e[i]))))},touchend:function(u,f,e){r&&(r=!1,e.point.length!==2&&(f.end=n.extend({},f[i].move[f[i].move.length-1])),f[i].rotation=t.calc.getRotation(f[i].start,f.end),f[i].scale=t.calc.getScale(f[i].start,f.end),n(u.target).trigger(n.Event("transformend",f[i])))}})}(jQuery,jQuery.toe,this);
/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n:n(jQuery)})(function(n){function e(r){var f=r||window.event,w=h.call(arguments,1),l=0,o=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(f),r.type="mousewheel","detail"in f&&(e=f.detail*-1),"wheelDelta"in f&&(e=f.wheelDelta),"wheelDeltaY"in f&&(e=f.wheelDeltaY),"wheelDeltaX"in f&&(o=f.wheelDeltaX*-1),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(o=e*-1,e=0),l=e===0?o:e,"deltaY"in f&&(e=f.deltaY*-1,l=e),"deltaX"in f&&(o=f.deltaX,e===0&&(l=o*-1)),e!==0||o!==0)return f.deltaMode===1?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,o*=v):f.deltaMode===2&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,o*=y),a=Math.max(Math.abs(e),Math.abs(o)),(!t||a<t)&&(t=a,s(f,a)&&(t/=40)),s(f,a)&&(l/=40,o/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),o=Math[o>=1?"floor":"ceil"](o/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=o,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,o,e),u&&clearTimeout(u),u=setTimeout(c,200),(n.event.dispatch||n.event.handle).apply(this,w)}function c(){t=null}function s(n,t){return i.settings.adjustOldDeltas&&n.type==="mousewheel"&&t%120==0}var o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,u,t,f,i;if(n.event.fixHooks)for(f=o.length;f;)n.event.fixHooks[o[--f]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!1);else this.onmousewheel=e;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})});
/*! jQuery imgViewer - v0.7.3 - 2015-03-12
* https://github.com/waynegm/imgViewer
* Copyright (c) 2015 Wayne Mogg; Licensed MIT */
(function(n,t){var i="drag",u={distance:40},r;t.track(i,{touchstart:function(n,t,u){r=!1;t[i]={finger:u.point.length,start:u,deltaX:0,deltaY:0}},touchmove:function(f,e,o){var h=n.extend(u,f.data),s;e[i].finger=o.point.length>e[i].finger?o.point.length:e[i].finger;s=t.calc.getDistance(e.start.point[0],o.point[0]);Math.abs(1-s)>h.distance&&(r||(n(f.target).trigger(n.Event("dragstart",e[i])),r=!0),e[i].deltaX=o.point[0].x-e.start.point[0].x,e[i].deltaY=o.point[0].y-e.start.point[0].y,n(f.target).trigger(n.Event("drag",e[i])))},touchend:function(f,e,o){if(r){r=!1;var s=t.calc.getDistance(e.start.point[0],o.point[0]);s>u.distance&&(e[i].deltaX=o.point[0].x-e.start.point[0].x,e[i].deltaY=o.point[0].y-e.start.point[0].y,n(f.target).trigger(n.Event("dragend",e[i])))}}})})(jQuery,jQuery.toe,this),function(n){n.widget("wgm.imgViewer",{options:{zoomStep:.1,zoom:1,zoomable:!0,onClick:null,onUpdate:null},_create:function(){function f(){t.render||(t.render=!0,o())}function e(){t.render=!1}function o(){t.render&&(window.requestAnimationFrame(o),t.update())}function s(n){if(t.options.zoomable){n.preventDefault();var i=n.deltaY;t.options.zoom-=i*t.options.zoomStep;t.update()}}var t=this,r,i,u;this.element.is("img")||n.error("imgviewer plugin can only be applied to img elements");t.img=t.element[0];r=n(t.img);t.zimg=n("<img/>",{src:t.img.src}).appendTo("body").wrap("<div class='viewport' id='viewport'/>");i=n(t.zimg);t.view=n(t.zimg).parent();u=n(t.view);t.vCenter={};t.dragging=!1;t.ready=!1;r.one("load",function(){var o,s;t.ready=!0;var n=r.width(),f=r.height(),e=r.offset();t.offsetPadding={top:parseInt(r.css("padding-top"),10),left:parseInt(r.css("padding-left"),10),right:parseInt(r.css("padding-right"),10),bottom:parseInt(r.css("padding-bottom"),10)};t.offsetBorder={x:Math.round((r.outerWidth()-r.innerWidth())/2),y:Math.round((r.outerHeight()-r.innerHeight())/2)};o=e.top+t.offsetBorder.y+t.offsetPadding.top;s=e.left+t.offsetBorder.x+t.offsetPadding.left;u.css({position:"absolute",overflow:"hidden",top:o+"px",left:s+"px",width:n+"px",height:f+"px"});i.css({position:"relative",top:"0px",left:"0px",width:n+"px",height:f+"px","-webkit-tap-highlight-color":"transparent"});t.vCenter={x:n/2,y:f/2};t.update()}).each(function(){this.complete&&n(this).load()});t.render=!1;i.on("mousewheel",s);if(window.navigator.msPointerEnabled){i.on("click",function(n){n.preventDefault();t.dragging||t._trigger("onClick",n,t)});i.on("mousedown",function(r){function o(r){setTimeout(function(){t.dragging=!1},0);r.preventDefault();e();i.off("mousemove");i.off("mouseup");n(document).off("mouseup")}if(t.options.zoomable){n(document).one("mouseup",o);i.one("mouseup",o);r.preventDefault();f();var u=r;i.on("mousemove",function(n){n.preventDefault();t.dragging=!0;t.vCenter.x=t.vCenter.x-(n.pageX-u.pageX)/t.options.zoom;t.vCenter.y=t.vCenter.y-(n.pageY-u.pageY)/t.options.zoom;u=n})}})}else{i.on("touchstart touchmove touchend",function(n){n.preventDefault()});i.on("transformstart",function(n){t.options.zoomable&&(n.preventDefault(),t.pinchzoom=t.options.zoom,f())});i.on("transform",function(n){t.options.zoomable&&(n.preventDefault(),t.options.zoom=t.pinchzoom*n.scale)});i.on("transformend",function(n){t.options.zoomable&&(n.preventDefault(),t.options.zoom=t.pinchzoom*n.scale,e(),t.update())});i.on("dragstart",function(n){t.options.zoomable&&(n.preventDefault(),t.dragging=!0,t.dragXorg=t.vCenter.x,t.dragYorg=t.vCenter.y,f())});i.on("drag",function(n){t.options.zoomable&&(n.preventDefault(),t.vCenter.x=t.dragXorg-n.deltaX/t.options.zoom,t.vCenter.y=t.dragYorg-n.deltaY/t.options.zoom)});i.on("dragend",function(n){t.options.zoomable&&(n.preventDefault(),t.dragging=!1,t.vCenter.x=t.dragXorg-n.deltaX/t.options.zoom,t.vCenter.y=t.dragYorg-n.deltaY/t.options.zoom,e(),t.update())});if(n.mobile!==undefined)i.on("vclick",function(n){n.preventDefault();t.dragging||t._trigger("onClick",n,t)});else i.on("tap click",function(n){n.preventDefault();t.dragging||t._trigger("onClick",n,t)});i.on("mousedown",function(r){function o(r){setTimeout(function(){t.dragging=!1},0);r.preventDefault();e();i.off("mousemove");i.off("mouseup");n(document).off("mouseup")}if(t.options.zoomable){r.preventDefault();f();var u=r;i.on("mousemove",function(n){n.preventDefault();t.dragging=!0;t.vCenter.x=t.vCenter.x-(n.pageX-u.pageX)/t.options.zoom;t.vCenter.y=t.vCenter.y-(n.pageY-u.pageY)/t.options.zoom;u=n});n(document).one("mouseup",o);i.one("mouseup",o)}})}n(window).resize(function(){t.ready&&(t.vCenter.x*=r.width()/u.width(),t.vCenter.y*=r.height()/u.height(),t.update())})},destroy:function(){var t=n(this.zimg);t.unbind("click");n(window).unbind("resize");t.remove();n(this.view).remove();n.Widget.prototype.destroy.call(this)},_setOption:function(t,i){switch(t){case"zoom":if(parseFloat(i)<1||isNaN(parseFloat(i)))return;break;case"zoomStep":if(parseFloat(i)<=0||isNaN(parseFloat(i)))return}var r=n.ui.version.split(".");r[0]>1||r[1]>8?this._super(t,i):n.Widget.prototype._setOption.apply(this,arguments);switch(t){case"zoom":this.ready&&this.update()}},addElem:function(t){n(this.view).append(t)},isVisible:function(n,t){var i=this.getView();return i?n>=i.left&&n<=i.right&&t>=i.top&&t<=i.bottom:!1},getView:function(){if(this.ready){var i=n(this.img),r=i.width(),u=i.height(),t=this.options.zoom;return{top:this.vCenter.y/u-.5/t,left:this.vCenter.x/r-.5/t,bottom:this.vCenter.y/u+.5/t,right:this.vCenter.x/r+.5/t}}return null},panTo:function(t,i){if(this.ready&&t>=0&&t<=1&&i>=0&&i<=1){var r=n(this.img),u=r.width(),f=r.height();return this.vCenter.x=t*u,this.vCenter.y=i*f,this.update(),{x:this.vCenter.x/u,y:this.vCenter.y/f}}return null},imgToView:function(t,i){if(this.ready&&t>=0&&t<=1&&i>=0&&i<=1){var r=n(this.img),u=r.width(),f=r.height(),e=u/2-this.vCenter.x*this.options.zoom,o=f/2-this.vCenter.y*this.options.zoom,s=t*u*this.options.zoom+e,h=i*f*this.options.zoom+o;return{x:Math.round(s),y:Math.round(h)}}return null},imgToCursor:function(t,i){var r=this.imgToView(t,i),u;return r?(u=n(this.img).offset(),r.x+=u.left+this.offsetBorder.x+this.offsetPadding.left,r.y+=u.top+this.offsetBorder.y+this.offsetPadding.top,r):null},viewToImg:function(t,i){if(this.ready){var f=n(this.img),e=f.width(),o=f.height(),s=e/2-this.vCenter.x*this.options.zoom,h=o/2-this.vCenter.y*this.options.zoom,r=(t-s)/(e*this.options.zoom),u=(i-h)/(o*this.options.zoom);return r>=0&&r<=1&&u>=0&&u<=1?{x:r,y:u}:null}return null},cursorToImg:function(t,i){if(this.ready){var r=n(this.img),e=r.width(),o=r.height(),s=r.offset(),h=e/2-this.vCenter.x*this.options.zoom,c=o/2-this.vCenter.y*this.options.zoom,u=(t-s.left-this.offsetBorder.x-this.offsetPadding.left-h)/(e*this.options.zoom),f=(i-s.top-this.offsetBorder.y-this.offsetPadding.top-c)/(o*this.options.zoom);return u>=0&&u<=1&&f>=0&&f<=1?{x:u,y:f}:null}return null},update:function(){var a,v,y,p;if(this.ready){var u,f,s,h,c=n(this.img),i=c.width(),r=c.height(),l=c.offset(),t=this.options.zoom,e=i/2,o=r/2;t<=1?(u=0,f=0,s=i,h=r,this.vCenter={x:e,y:o},this.options.zoom=1,t=1):(u=Math.round(o-this.vCenter.y*t),f=Math.round(e-this.vCenter.x*t),s=Math.round(i*t),h=Math.round(r*t),f>0?(this.vCenter.x=e/t,f=0):f+s<i&&(this.vCenter.x=i-e/t,f=i-s),u>0?(this.vCenter.y=o/t,u=0):u+h<r&&(this.vCenter.y=r-o/t,u=r-h));a=Math.round(l.top+this.offsetBorder.y+this.offsetPadding.top);v=Math.round(l.left+this.offsetBorder.x+this.offsetPadding.left);n(this.view).css({top:a+"px",left:v+"px",width:i+"px",height:r+"px"});n(this.zimg).css({width:i+"px",height:r+"px"});y=-(this.vCenter.x-e)*t;p=-(this.vCenter.y-o)*t;n(this.zimg).css({transform:"translate("+y+"px,"+p+"px) scale("+t+","+t+")"});this._trigger("onUpdate",null,this)}}})}(jQuery);
/*! jQuery imgNotes - v0.7.5 - 2015-03-12
* https://github.com/waynegm/imgNotes
* Copyright (c) 2015 Wayne Mogg; Licensed MIT */
(function(n){n.widget("wgm.imgNotes",{options:{zoom:1,zoomStep:.1,zoomable:!0,canEdit:!1,vAll:"middle",hAll:"middle",onAdd:function(){return this.options.vAll="bottom",this.options.hAll="middle",n(document.createElement("span")).addClass("marker black").html(this.noteCount)},onEdit:function(t,i){var r=n(i);return n("#NoteDialog").remove(),n('<div id="NoteDialog"><\/div>').dialog({title:"Note Editor",resizable:!1,modal:!0,height:"300",width:"450",position:{my:"left bottom",at:"right top",of:i},buttons:{Save:function(){var t=n("textarea",this).val();r.data("note",t);n(this).dialog("close")},Delete:function(){r.trigger("remove");n(this).dialog("close")},Cancel:function(){n(this).dialog("close")}},open:function(){n(this).css("overflow","hidden");var t=n('<textarea id="txt" style="height:100%; width:100%;">');n(this).html(t);t.val(r.data("note"))}})},onShow:function(t,i){var r=n(i);return n("#NoteDialog").remove(),n('<div id="NoteDialog"><\/div>').dialog({modal:!1,resizable:!1,height:300,width:250,position:{my:"left bottom",at:"right top",of:i},buttons:{Close:function(){n(this).dialog("close")}},open:function(){n(this).html(r.data("note"));n(this).closest(".ui-dialog").find(".ui-dialog-titlebar:first").hide()},close:function(){n(this).dialog("destroy")}})},onUpdateMarker:function(t){var i=n(t),u=n(this.img),r=u.imgViewer("imgToView",i.data("relx"),i.data("rely"));r&&i.css({left:r.x-i.data("xOffset"),top:r.y-i.data("yOffset"),position:"absolute"})},onUpdate:function(){var t=this;n.each(this.notes,function(){t.options.onUpdateMarker.call(t,this)})}},_create:function(){var t=this,i;this.element.is("img")||n.error("imgNotes plugin can only be applied to img elements");t.notes=[];t.noteCount=0;t.img=t.element[0];i=n(t.img);i.imgViewer({onClick:function(n,i){var r,u;t.options.canEdit&&(n.preventDefault(),r=i.cursorToImg(n.pageX,n.pageY),r&&(u=t.addNote(r.x,r.y),t._trigger("onEdit",n,u)))},onUpdate:function(n,i){t.options.zoom=i.options.zoom;t.options.onUpdate.call(t)},zoom:t.options.zoom,zoomStep:t.options.zoomStep,zoomable:t.options.zoomable});i.imgViewer("update")},destroy:function(){this.clear();n(this.img).imgViewer("destroy");n.Widget.prototype.destroy.call(this)},_setOption:function(t,i){switch(t){case"vAll":switch(i){case"top":break;case"bottom":break;default:i="middle"}break;case"hAll":switch(i){case"left":break;case"right":break;default:i="middle"}}var r=n.ui.version.split(".");r[0]>1||r[1]>8?this._super(t,i):n.Widget.prototype._setOption.apply(this,arguments);switch(t){case"zoom":n(this.img).imgViewer("option","zoom",i);break;case"zoomStep":n(this.img).imgViewer("option","zoomStep",i);break;case"zoomable":n(this.img).imgViewer("option","zoomable",i)}},panTo:function(t,i){return n(this.img).imgViewer("panTo",t,i)},addNote:function(t,i,r){var e=this,f,u;this.noteCount++;f=this.options.onAdd.call(this);u=n(f);n(this.img).imgViewer("addElem",f);u.data("relx",t).data("rely",i).data("note",r);switch(this.options.vAll){case"top":u.data("yOffset",0);break;case"bottom":u.data("yOffset",u.height());break;default:u.data("yOffset",Math.round(u.height()/2))}switch(this.options.hAll){case"left":u.data("xOffset",0);break;case"right":u.data("xOffset",u.width());break;default:u.data("xOffset",Math.round(u.width()/2))}u.click(function(n){n.preventDefault();e.options.canEdit?e._trigger("onEdit",n,f):e._trigger("onShow",n,f)});u.on("remove",function(){e._delete(f)});return this.notes.push(f),n(this.img).imgViewer("update"),f},count:function(){return this.noteCount},_delete:function(t){this.notes=this.notes.filter(function(n){return n!==t});n(t).remove();n(this.img).imgViewer("update")},clear:function(){for(var i,n=this,r=n.notes.length,t=0;t<r;t++)i=n.notes[t],i.off(),i.remove();n.notes=[];n.noteCount=0},"import":function(t){var i=this;n.each(t,function(){i.addNote(this.x,this.y,this.note)});n(this.img).imgViewer("update")},"export":function(){var t=[];return n.each(this.notes,function(){var i=n(this);t.push({x:i.data("relx"),y:i.data("rely"),note:i.data("note")})}),t}})})(jQuery);
/*
//# sourceMappingURL=imgnote.min.js.map
*/